<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>药品管理系统</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/layui/css/layui.css" rel="stylesheet">
</head>
<body>
<div class="layui-layout layui-layout-admin" style="font-weight: bold;">
    <div class="layui-header">
        <div class="layui-logo layui-hide-xs layui-bg-black">药品管理系统</div>
        <!-- 头部区域 -->
        <ul class="layui-nav layui-layout-left">
            <!-- 移动端显示 -->
            <li class="layui-nav-item layui-show-xs-inline-block layui-hide-sm" lay-header-event="menuLeft">
                <i class="layui-icon layui-icon-spread-left"></i>
            </li>
            <li class="layui-nav-item layui-hide-xs" lay-unselect lay-header-event="menuChange">
                <a href="#" title="侧边伸缩"><i class="layui-icon layui-icon-shrink-right"></i></a>
            </li>
            <li class="layui-nav-item layui-hide-xs" lay-unselect lay-header-event="menuRefresh">
                <a href="#" title="刷新页面"><i class="layui-icon layui-icon-refresh-3"></i></a>
            </li>
        </ul>
        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item" lay-unselect>
                <a href="/toNoticePerson" target="ZHY" title="消息中心">
                    <i class="layui-icon layui-icon-notice"></i>
                    <!-- 如果有新消息，则显示小圆点 -->
                    <span class="layui-badge-dot"></span>
                </a>
            </li>
            <li class="layui-nav-item layui-hide-xs" lay-unselect lay-header-event="menuColor">
                <a href="#" title="主题配色"><i class="layui-icon layui-icon-theme"></i></a>
            </li>
            <li class="layui-nav-item layui-hide-xs" lay-unselect lay-header-event="menuNote">
                <a href="#" title="小备忘录"><i class="layui-icon layui-icon-note"></i></a>
            </li>
            <li class="layui-nav-item layui-hide-xs" lay-unselect lay-header-event="menuFull">
                <a href="#" title="充满屏幕">
                    <i class="layui-icon layui-icon-screen-full"></i>
                </a>
            </li>
            <li class="layui-nav-item layui-hide layui-show-sm-inline-block">
                <a href="#">
                    <img src="/image/nxu.png" class="layui-nav-img" alt="">
                    <span th:text="${session.loginUser.name}"></span>
                </a>
                <dl class="layui-nav-child" style="text-align: center;">
                    <dd><a href="#">基本资料</a></dd>
                    <dd><a href="#">修改密码</a></dd>
                    <dd lay-header-event="logout"><a href="#">退出登录</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item" lay-unselect lay-header-event="menuRight">
                <a href="#">
                    <i class="layui-icon layui-icon-more-vertical"></i>
                </a>
            </li>
        </ul>
    </div>
    <div class="layui-side layui-bg-black">
        <div class="layui-side-scroll">
            <!-- 左侧导航区域 -->
            <ul class="layui-nav layui-nav-tree" lay-filter="test">
                <li class="layui-nav-item">
                    <a href="/toMedicine" target="ZHY">
                        <i class="layui-icon layui-icon-form"></i> <cite>药品信息管理</cite>
                    </a>
                </li>
                <li class="layui-nav-item">
                    <a href="/toStock" target="ZHY">
                        <i class="layui-icon layui-icon-component"></i> <cite>药品库存管理</cite>
                    </a>
                </li>
                <li class="layui-nav-item">
                    <a href="/toRecord" target="ZHY">
                        <i class="layui-icon layui-icon-file-b"></i> <cite>库存变动记录</cite>
                    </a>
                </li>
                <li class="layui-nav-item">
                    <a href="#">
                        <i class="layui-icon layui-icon-notice"></i> <cite>通知公告管理</cite>
                    </a>
                    <dl class="layui-nav-child">
                        <dd>
                            <a href="/toNoticeAdd" target="ZHY">
                                <i class="layui-icon layui-icon-add-circle"></i> <cite>发布新的通知</cite>
                            </a>
                        </dd>
                        <dd>
                            <a href="/toNoticeMange" target="ZHY">
                                <i class="layui-icon layui-icon-about"></i> <cite>管理全部通知</cite>
                            </a>
                        </dd>
                        <dd>
                            <a href="/toBrowse" target="ZHY">
                                <i class="layui-icon layui-icon-face-smile"></i> <cite>通知浏览记录</cite>
                            </a>
                        </dd>
                    </dl>
                </li>
                <li class="layui-nav-item">
                    <a href="/toLogManage" target="ZHY">
                        <i class="layui-icon layui-icon-log"></i> <cite>用户登录日志</cite>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="layui-body">
        <!-- 内容主体区域 -->
        <div style="padding: 10px;">
            <iframe src="/toWelcome" name="ZHY" style="border: none;position: absolute;width: 100%;height: 100%;left: 0;top: 0;right: 0;bottom: 0;"></iframe>
        </div>
    </div>
    <div class="layui-footer">
        <!-- 底部固定区域 -->
        <p style="text-align: center;">
            <a href="https://blog.csdn.net/SuperCodeZhy" target="_blank">Copyright © 张宏业 https://blog.csdn.net/SuperCodeZhy</a>
        </p>
    </div>
</div>


<script src="/layui/layui.js"></script>
<script>
    layui.use(['layer', 'util', 'jquery'], function () {
        let layer = layui.layer;
        let util = layui.util;
        let $ = layui.jquery;

        //头部事件
        util.event('lay-header-event', {
            menuChange: function () {
                layer.msg('伸缩边栏');
            },
            menuRefresh: function () {
                layer.msg('刷新页面');
            },
            menuLeft: function (othis) { // 左侧菜单事件
                layer.msg('展开左侧菜单的操作', {icon: 0});
                console.log(othis)
            },
            menuRight: function () {  // 右侧菜单事件
                layer.open({
                    type: 1,
                    title: '更多',
                    content: '<div style="padding: 15px;"><h3>药品管理系统</h3><h4>作者：张宏业</h4><h4>邮箱：3030695949@qq.com</h4></div>',
                    area: ['260px', '100%'],
                    offset: 'rt', // 右上角
                    anim: 'slideLeft', // 从右侧抽屉滑出
                    shadeClose: true,
                    scrollbar: false
                });
            },
            menuColor: function () {
                layer.msg('主题颜色');
            },
            menuNote: function () {
                layer.msg('备忘录');
            },
            menuFull: function () {
                layer.msg('充满屏幕');
            },
            logout: function () {
                layer.confirm('确定退出登录嘛？', {
                    btn: ['确定', '取消']
                }, function () {
                    $.ajax({
                        url: '/doUserLogout',
                        type: 'GET',
                        success: function (res) {
                            if (res.code) {
                                layer.msg('登出成功！', {icon: 1});
                                setTimeout(() => {
                                    window.location = '/toUserLogin';
                                }, 2000)
                            } else {
                                layer.msg('登出失败！', {icon: 2});
                            }
                        },
                        error: function (err) {
                            layer.msg('Ajax请求异常！', {icon: 0});
                        }
                    });
                }, function () {
                    layer.msg('已取消登出！');
                });
            }
        });
    });
</script>
</body>
</html>